DELIMITER $$
CREATE FUNCTION GetWordScore(w VARCHAR(200), d INT) RETURNS FLOAT(4) DETERMINISTIC
BEGIN
  DECLARE score FLOAT(4) DEFAULT 0.0;
  SELECT FREQ INTO score FROM INVINDEX WHERE WORD = w and DOC_ID = d;
  SELECT score/SUM(FREQ) INTO score FROM INVINDEX WHERE DOC_ID = d;
  RETURN score;
END $$
DELIMITER ;

SELECT DISTINCT DOC_ID, GetWordScore('Hello',DOC_ID)+GetWordScore('World', DOC_ID) as SCORE FROM INVINDEX WHERE GetWordScore('Hello',DOC_ID)+GetWordScore('World', DOC_ID) != 0;
